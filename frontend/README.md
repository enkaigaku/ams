# 打刻管理システム Frontend

従業員の出退勤時刻を正確に記録し、基本的な勤怠管理を効率化するWebアプリケーションのフロントエンド部分です。

## 技術スタック

- **React 18** - UIライブラリ
- **TypeScript** - 型安全な開発
- **Vite** - 高速ビルドツール
- **React Router v6** - ルーティング
- **TanStack Query** - サーバー状態管理
- **Zustand** - クライアント状態管理
- **Tailwind CSS** - スタイリング
- **React Hook Form** - フォーム管理
- **Zod** - バリデーション
- **Axios** - HTTP クライアント
- **date-fns** - 日付操作
- **Heroicons** - アイコン

## プロジェクト構成

```
frontend/
├── public/                     # 静的ファイル
│   └── manifest.json          # PWA マニフェスト
├── src/
│   ├── components/            # 再利用可能コンポーネント
│   │   ├── ui/               # 基本UIコンポーネント
│   │   ├── forms/            # フォームコンポーネント
│   │   └── layout/           # レイアウトコンポーネント
│   ├── pages/                # ページコンポーネント
│   │   ├── auth/            # 認証関連ページ
│   │   ├── employee/        # 従業員向けページ
│   │   └── manager/         # 管理者向けページ
│   ├── hooks/                # カスタムフック
│   ├── services/             # API通信
│   ├── stores/               # 状態管理
│   ├── types/                # TypeScript型定義
│   ├── utils/                # ユーティリティ関数
│   ├── App.tsx              # メインアプリコンポーネント
│   └── main.tsx             # エントリーポイント
└── package.json
```

## セットアップ

### 必要な環境

- Node.js 18.0.0 以上
- npm または yarn

### インストール

```bash
# 依存関係をインストール
npm install

# 環境変数ファイルをコピー
cp .env.example .env.local
```

### 環境変数

`.env.local` ファイルで以下の変数を設定してください：

```env
# API サーバーのURL
VITE_API_URL=http://localhost:3001/api

# 環境設定
VITE_NODE_ENV=development
```

### 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:5173` にアクセスしてください。

### ビルド

```bash
# プロダクションビルド
npm run build

# ビルド結果のプレビュー
npm run preview
```

## 機能

### 従業員向け機能

- **ダッシュボード**: 当日の出勤状況、勤務時間の確認
- **打刻機能**: 出勤・退勤・休憩開始/終了の打刻
- **勤怠履歴**: カレンダー形式での過去の勤怠記録確認
- **申請機能**: 
  - 有給・病欠・私用休暇の申請
  - 打刻修正申請

### 管理者向け機能

- **管理ダッシュボード**: チーム全体の出勤状況概要
- **チーム状況**: メンバーの詳細な出勤状況確認
- **承認管理**: 休暇申請・打刻修正申請の承認/却下
- **レポート機能**: 月次レポートの確認・CSVエクスポート

## モバイル対応

- **レスポンシブデザイン**: PC・スマートフォン・タブレット対応
- **PWA対応**: ホーム画面への追加、オフライン動作
- **タッチ最適化**: 大きなボタン、スワイプジェスチャー
- **位置情報**: 出勤時の位置情報記録（オプション）

## 認証・セキュリティ

- **JWT認証**: トークンベース認証システム
- **役割ベースアクセス制御**: 従業員・管理者の権限分離
- **ルート保護**: 認証済みユーザーのみアクセス可能
- **自動ログアウト**: トークン有効期限切れ時の自動リダイレクト

## 状態管理

### Zustand Store

- **authStore**: 認証状態（ユーザー情報、トークン）
- **timeStore**: 打刻関連状態（今日の記録、打刻状態）

### TanStack Query

- **サーバー状態**: API レスポンスのキャッシュと同期
- **バックグラウンド更新**: 定期的なデータ同期
- **楽観的更新**: UI の高速応答

## API 統合

すべてのAPI通信は `src/services/` で管理：

- **authService**: 認証関連API
- **timeService**: 打刻・勤怠記録API  
- **requestService**: 申請関連API
- **managerService**: 管理者機能API

## コードスタイル

- **TypeScript**: 厳密な型チェック
- **ESLint**: コード品質チェック
- **Prettier**: コードフォーマット統一

## ブラウザ対応

- Chrome (最新版)
- Firefox (最新版)
- Safari (最新版)
- Edge (最新版)
- iOS Safari (iOS 12+)
- Chrome Mobile (Android 8+)

## 今後の拡張予定

- プッシュ通知
- オフライン機能の拡張
- 生体認証対応
- 多言語対応
- テーマカスタマイズ

## トラブルシューティング

### よくある問題

1. **ビルドエラー**: `npm install` で依存関係を再インストール
2. **API 接続エラー**: 環境変数の API URL を確認
3. **認証エラー**: ローカルストレージをクリアしてログイン

### デバッグ

```bash
# 開発モードでのデバッグログ確認
npm run dev

# ビルド詳細確認
npm run build -- --mode development
```

## ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。
